# 3.3 Сущностная модель

### ER-диаграмма

```mermaid
erDiagram
    %% --- Основные сущности ---
    Сотрудники {
        int ID
        string ФИО
        string Должность
        string Специализация
        string СНИЛС
        datetime ДатаСоздания
        datetime ДатаИзменения
        string Создатель
    }

     Пациенты {
        int ID
        string ФИО
        date ДатаРождения
        string Пол
        string Контакты
        string СНИЛС
        string ПолисОМС
        datetime ДатаСоздания
        datetime ДатаИзменения
        string Создатель
    }

    Документы {
        int ID
        string Номер
        date Дата
        string Тип
        string Содержание
        string Статус
        datetime ДатаСоздания
        datetime ДатаИзменения
        string Создатель
    }

    СЭМД {
        int ID
        string Шаблон
        string СтатусПодписи
        datetime ДатаСоздания
        datetime ДатаИзменения
        string Создатель
    }

    ТипДокумента {
        int ID
        string Наименование
        datetime ДатаСоздания
        datetime ДатаИзменения
        string Создатель
    }

    СтруктураДокументов {
        int ID
        string Метаданные
        datetime ДатаСоздания
        datetime ДатаИзменения
        string Создатель
    }

    ШаблоныСЭМД {
        int ID
        string Наименование
        datetime ДатаСоздания
        datetime ДатаИзменения
        string Создатель
    }

 
    %% --- Справочники ---
    СправочникАдресов {
        int ID
        string Адрес
    }

    СправочникПрофилейМП {
        int ID
        string Наименование
    }

    СправочникОрганизаций {
        int ID
        string Наименование
    }

    СправочникЗаболеваний {
        int ID
        string КодМКБ
        string Наименование
    }

    СправочникПрепаратов {
        int ID
        string Наименование
    }

    %% --- Связи ---
    Сотрудники ||--o{ Документы : "имеет"
    Пациенты ||--o{ Документы : "имеет"
    ТипДокумента ||--|| СтруктураДокументов : "определяет"
    Документы }o--|| ТипДокумента : "относится"
    Документы ||--o| СЭМД : "преобразуется"
        СЭМД ||--|| ШаблоныСЭМД : "создается на основе"

    %% --- Справочные связи ---
    Пациенты }o--|| СправочникАдресов : "адрес"
    Документы }o--|| СправочникОрганизаций : "организация"
    Документы }o--|| СправочникЗаболеваний : "диагноз"
    Документы }o--|| СправочникПрепаратов : "препарат"
    Документы }o--|| СправочникПрофилейМП : "профиль мед.услуг"
```

### Основные сущности

#### 1. Пользователи и персонал

* Сотрудники - основная сущность для хранения информации о медицинском персонале (врачи, регистраторы)
* Профиль пользователя - персональные настройки  пользователей системы

#### 2. Пациенты и клиническая информация

* Пациенты - центральная сущность для хранения данных пациентов
* Документы - медицинские документы, связанные с пациентами и содержащие клиническую информацию
* СЭМД - структурированные электронные медицинские документы, соответствующие стандартам

#### 3. Справочники и классификаторы

* Справочник адресов&#x20;
* Справочник профилей медицинской помощи&#x20;
* Справочник организаций&#x20;
* Справочник заболеваний и диагнозов&#x20;
* Справочник лекарственных препаратов&#x20;

#### 4. Конфигурация и шаблоны

* Тип документа - классификация медицинских документов по типам
* Структура документов - метаданные для определения полей и структуры документов
* Шаблоны СЭМД - предопределенные шаблоны для создания структурированных документов
* Настройки - системные параметры&#x20;

### Связи между сущностями

#### Основные взаимосвязи:

1. Сотрудники - Документы: один сотрудник может создавать множество документов
2. Пациенты - Документы: один пациент может иметь множество медицинских документов
3. Документы - Тип документа: каждый документ относится к определенному типу
4. Документы - СЭМД: документы могут быть преобразованы в структурированные СЭМД
5. Тип документа - Структура документов: каждый тип имеет определенную структуру
6. СЭМД - Шаблоны СЭМД: СЭМД создаются на основе шаблонов

#### Справочные связи:

* Пациенты → Справочник адресов
* Документы → Справочник организаций
* Документы → Справочник заболеваний и диагнозов
* Документы → Справочник лекарственных препаратов
* Документы → Справочник профилей мед.услуг

### Ключевые атрибуты сущностей

#### Общие атрибуты для всех сущностей:

* ID&#x20;
* Дата создания
* Дата последнего изменения
* Пользователь, создавший запись

#### Специфические атрибуты:

* Пациенты: ФИО, дата рождения, пол, контакты, СНИЛС, полис ОМС
* Сотрудники: ФИО, должность, специализация, СНИЛС
* Документы: номер, дата, тип, содержание, статус
* СЭМД: шаблон СЭМД, статус подписи
